{% extends "base.html" %}
{% block content %}
<!-- Posts written by the user -->
<h2 class="mt-5">Written by Me</h2>
<div class="row">
    {% for post in my_posts %}
    <div class="col-md-4">
        <div class="image-wrapper d-flex justify-content-center">
            {% if "placeholder" in post.featured_image.url %}
            <img class="card-img-top"
                src="https://res.cloudinary.com/ds66fig3o/image/upload/v1683383811/juuj0wzknxo1vehzgsrp.jpg"
                alt="forest">
            {% else %}
            <img class="card-img-top" src="{{ post.featured_image.url }}" alt="{{ post.title }}">
            {% endif %}
        </div>
        <div class="mx-2 mt-2 post-text">
            <span><strong>{{ post.title }}</strong></span>
            <span class="excerpt-author">By {{ post.author }}</span>
            <div class="date-city d-flex justify-content-end">
                <ul>
                    <!-- if the post has been published, display the published date. -->
                    {% if post.status == 2 %}
                    <li>Published on {{ post.pub_date }}</li>
                    {% else %}
                    <!-- state if the post is a draft or has been submitted -->
                    <li>{{ post.status_value }}</li>
                    <li>Created on {{ post.created_on|date:'M d, Y' }}</li>
                    {% endif %}
                </ul>
            </div>
            <p class="mt-1 excerpt">{{ post.excerpt }}</p>
            <a href="{% url 'detail_page' post.slug %}">Read the full story</a>
        </div>
        <hr class="line">
    </div>
    <!-- If there are more than 3 posts in this category, display them when 'Show more' button is clicked. -->
    {% if my_posts|length > 3 %}
    {% if forloop.counter == 3 %}
</div>
<button id="show-my-posts" class="btn btn-link show-posts mb-4">Show more</button>
<div id="my-posts" class="hide">
    <div class="row mt-2">
        {% elif forloop.last %}
    </div>
    <button class="btn btn-link hide-posts mt-5">Show less</button>
    {% elif forloop.counter > 3 %}
    {% if forloop.counter|divisibleby:3 %}
</div>
<hr class="line-for-lg">
<div class="row mt-2">
    {% endif %}
    {% endif %}
    {% endif %}
    {% empty %}
    <p>No posts</p>
    {% endfor %}
</div>
{% endblock %}